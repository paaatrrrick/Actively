<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <link rel="stylesheet" href="/stylesheets/default.css">
    <link rel="stylesheet" href="/stylesheets/dashboard.css">
    <link rel="icon" type="image/x-icon" href="/images/favicon.png">

    <title>Dashboard</title>
</head>

<body>
    <% function makeTimePretty(date) { console.log(''); console.log('here123'); console.log(date);
        console.log(date.getTimezoneOffset()); var hours=date.getHours(); var str='AM' ; if (hours> 11) {
        str = 'PM';
        hours = hours - 12;
        }
        if (hours == 0) {
        hours = 12;
        }
        console.log('this point 123')
        var minutes = String(date.getMinutes());
        if (String(minutes).length == 1) {
        minutes = '0' + minutes;
        }
        console.log(String(String(hours) + ':' + minutes + ' ' + str + ' on ' + String(date.toDateString()).slice(0,
        10)))
        return String(String(hours) + ':' + minutes + ' ' + str + ' on ' + String(date.toDateString()).slice(0, 10));
        }
        %>
        <% if(success.length> 0){ %>
            <div class="flashHolder" id='holderG'>
                <div class="innerFlash innerG">
                    <p class="flashText textG">
                        <%= success %>
                    </p>
                    <button class="flashBtn btnG" onclick="disapearG()">X</button>
                </div>
            </div>
            <% } %>

                <div class="headerStuff">
                    <div class="row">
                        <h1>Events</h1>
                        <a href="/logout" class="btn1" id='log'>Logout</a>
                        <a href="/newEvent" class="btn1">New Event +</a>
                    </div>
                    <div class="hamburger">
                        <span class="bar"></span>
                        <span class="bar"></span>
                        <span class="bar"></span>
                    </div>
                </div>
                <div class="bottomSection">
                    <% if (upcomingContent.length==0 && currentContent.length==0){%>
                        <h3>Nothing posted yet, try other sports!</h3>
                        <hr>

                        <%} else {%>
                            <% if (currentContent.length> 0) { %>
                                <h3>Joined Events</h3>
                                <hr>


                                <% for (i in currentContent) { %>

                                    <div class="dashBoardHolderDiv">
                                        <div class="row">
                                            <img src="/images/<%=currentContent[i][1].sportType%>.png" alt="here123">
                                            <h4>
                                                <%= currentContent[i][1].sportType %>
                                            </h4>
                                            <% if (userId==currentContent[i][1].hostId) { %>
                                                <p class="marginLeft"> - Your Event</p>
                                                <% } else { %>
                                                    <p class="marginLeft"> - Joined</p>
                                                    <% } %>
                                        </div>
                                        <p class='insideHolder row'>
                                            <%=currentContent[i][1].location%>:
                                                <% console.log('what is up my ggs') %>
                                                    <%= currentContent[i][2].toLocaleTimeString()%>
                                                        - <%=currentContent[i][1].participantId.length + 1%> /
                                                            <%=currentContent[i][1].groupSize%> People Joined

                                        </p>
                                        <h5 class='insideHolder' id='nameText'>
                                            Host: <%= currentContent[i][0]%>
                                        </h5>

                                        <p class='insideHolder'>
                                            <%=currentContent[i][1].description%>
                                        </p>



                                        <div class="insideHolder row">
                                            <% if (currentContent[i][1].level=='Recreational' ) { %>
                                                <p class='rec levelBtn divBottomItem'>
                                                    <% } else if (currentContent[i][1].level=='Advanced' ) {%>
                                                        <p class='advanced levelBtn divBottomItem'>
                                                            <% } else { %>
                                                                <p class='everyThingElse levelBtn divBottomItem'>
                                                                    <% } %>
                                                                        Skill: <%=currentContent[i][1].level %>
                                                                </p>
                                        </div>
                                    </div>

                                    <% } %>
                                        <% } %>


                                            <h3>Upcoming Events</h3>
                                            <hr>
                                            <% for (i in upcomingContent) { %>

                                                <div class="dashBoardHolderDiv">
                                                    <div class="row">
                                                        <img src="/images/<%=upcomingContent[i][1].sportType%>.png"
                                                            alt="here123">
                                                        <h4>
                                                            <%= upcomingContent[i][1].sportType %>
                                                        </h4>
                                                    </div>
                                                    <p class='insideHolder row' onload="adjustTime()">
                                                        <%=upcomingContent[i][1].location%>:
                                                            <%= upcomingContent[i][2].toLocaleTimeString()%>
                                                                - <%=upcomingContent[i][1].participantId.length + 1%> /
                                                                    <%=upcomingContent[i][1].groupSize%> People
                                                                        Joined

                                                    </p>
                                                    <h5 class='insideHolder' id='nameText'>
                                                        Host: <%= upcomingContent[i][0]%>
                                                    </h5>

                                                    <p class='insideHolder'>
                                                        <%=upcomingContent[i][1].description%>
                                                    </p>



                                                    <div class="insideHolder row">
                                                        <% if (upcomingContent[i][1].level=='Recreational' ) { %>
                                                            <p class='rec levelBtn divBottomItem'>
                                                                <% } else if (upcomingContent[i][1].level=='Advanced' )
                                                                    {%>
                                                                    <p class='advanced levelBtn divBottomItem'>
                                                                        <% } else { %>
                                                                            <p
                                                                                class='everyThingElse levelBtn divBottomItem'>
                                                                                <% } %>
                                                                                    Skill:
                                                                                    <%=upcomingContent[i][1].level %>
                                                                            </p>
                                                                            <form
                                                                                action="/event/<%=upcomingContent[i][1].id%>/<%=userId%>"
                                                                                method="post">
                                                                                <button id='joinBtn'
                                                                                    class='everyThingElse levelBtn divBottomItem'>Join
                                                                                    Event</button>
                                                                            </form>
                                                    </div>
                                                </div>

                                                <% } %>
                                                    <% } %>

                </div>
                <header>
                    <nav class="navbar">
                        <div class="nav-menu">
                            <div class="nav-item">
                                <h5>Select Your Sports</h5>
                            </div>
                            <div class="nav-item"> <a href="#" id='top'
                                    class="nav-link<% if(userSports.includes('PingPong')){ %> check<% } %>">PingPong</a>
                            </div>
                            <div class="nav-item"> <a href="#"
                                    class="nav-link<% if(userSports.includes('Tennis')){ %> check<% } %>">Tennis</a>
                            </div>
                            <div class="nav-item"> <a href="#"
                                    class="nav-link<% if(userSports.includes('Pickleball')){ %> check<% } %>">Pickleball</a>
                            </div>
                            <div class="nav-item"> <a href="#"
                                    class="nav-link <% if(userSports.includes('Basketball')){ %> check<% } %>">Basketball</a>
                            </div>
                            <div class="nav-item"> <a href="#"
                                    class="nav-link <% if(userSports.includes('Soccer')){ %> check<% } %>">Soccer</a>
                            </div>
                            <div class="nav-item"> <a href="#"
                                    class="nav-link <% if(userSports.includes('Football')){ %> check<% } %>">Football</a>
                            </div>
                            <div class="nav-item"> <a href="#"
                                    class="nav-link <% if(userSports.includes('Spikeball')){ %> check<% } %>">Spikeball</a>
                            </div>
                        </div>
                    </nav>
                </header>


                <script src=/scripts/dashboardScript.js></script>
                <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.1.3/dist/js/bootstrap.bundle.min.js"
                    integrity="sha384-ka7Sk0Gln4gmtz2MlQnikT1wXgYsOg+OMhuP+IlRH9sENBO0LRn5q+8nbTov4+1p"
                    crossorigin="anonymous"></script>

                <script>
                    function disapearG() {
                        const element = document.getElementById('holderG')
                        element.classList.add('vanish')
                    }
                </script>


                <script>

                    function adjustTime(p1) {
                        console.log(curren)
                        console.log(p1)
                    }
                </script>


</body>

</html>